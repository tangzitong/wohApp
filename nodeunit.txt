vue test
<template>
  <span>{{ message }}</span>
</template>

<script>
  export default {
    data () {
      return {
        message: 'hello!'
      }
    },
    created () {
      this.message = 'bye!'
    }
  }
</script>

// Vue ï¿½ï¿½ ï¿½eï¿½Xï¿½gï¿½ÎÛ‚ÌƒRï¿½ï¿½ï¿½|ï¿½[ï¿½lï¿½ï¿½ï¿½gï¿½ï¿½ï¿½Cï¿½ï¿½ï¿½|ï¿½[ï¿½gï¿½ï¿½ï¿½ï¿½
import Vue from 'vue'
import MyComponent from 'path/to/MyComponent.vue'

// ï¿½eï¿½Xï¿½gï¿½ï¿½ï¿½ï¿½ï¿½iï¿½[ï¿½âŒŸï¿½Ø‚É‚ÍAï¿½Ç‚Ì‚æ‚¤ï¿½Èƒï¿½ï¿½Cï¿½uï¿½ï¿½ï¿½ï¿½ï¿½ï¿½pï¿½ï¿½ï¿½Ä‚ï¿½ï¿½\ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½
// ï¿½ï¿½ï¿½ï¿½ï¿½Å‚ï¿½ Jasmine 2.0 ï¿½ï¿½pï¿½ï¿½ï¿½ï¿½ï¿½eï¿½Xï¿½gï¿½Lï¿½qï¿½ï¿½ï¿½sï¿½ï¿½ï¿½Ä‚ï¿½ï¿½Ü‚ï¿½ï¿½B
describe('MyComponent', () => {
  // ï¿½Rï¿½ï¿½ï¿½|ï¿½[ï¿½lï¿½ï¿½ï¿½gï¿½ï¿½ options ï¿½ð’¼ÚŒï¿½ï¿½Ø‚ï¿½ï¿½Ü‚ï¿½ï¿½B
  it('has a created hook', () => {
    expect(typeof MyComponent.created).toBe('function')
  })

  // ï¿½Rï¿½ï¿½ï¿½|ï¿½[ï¿½lï¿½ï¿½ï¿½gï¿½ï¿½ options ï¿½ï¿½ï¿½É‚ï¿½ï¿½ï¿½Öï¿½ï¿½ï¿½ï¿½ï¿½ï¿½sï¿½ï¿½ï¿½A
  // ï¿½ï¿½ï¿½Ê‚ï¿½ï¿½ï¿½ï¿½Ø‚ï¿½ï¿½Ü‚ï¿½ï¿½B
  it('sets the correct default data', () => {
    expect(typeof MyComponent.data).toBe('function')
    const defaultData = MyComponent.data()
    expect(defaultData.message).toBe('hello!')
  })

  // ï¿½Rï¿½ï¿½ï¿½|ï¿½[ï¿½lï¿½ï¿½ï¿½gï¿½Cï¿½ï¿½ï¿½Xï¿½^ï¿½ï¿½ï¿½Xï¿½ï¿½ï¿½}ï¿½Eï¿½ï¿½ï¿½gï¿½ï¿½ï¿½ÄŒï¿½ï¿½Ø‚ï¿½ï¿½Ü‚ï¿½ï¿½B
  it('correctly sets the message when created', () => {
    const vm = new Vue(MyComponent).$mount()
    expect(vm.message).toBe('bye!')
  })

  // ï¿½}ï¿½Eï¿½ï¿½ï¿½gï¿½ï¿½ï¿½ê‚½ï¿½Rï¿½ï¿½ï¿½|ï¿½[ï¿½lï¿½ï¿½ï¿½gï¿½Cï¿½ï¿½ï¿½Xï¿½^ï¿½ï¿½ï¿½Xï¿½ï¿½`ï¿½æ‚µï¿½ÄŒï¿½ï¿½Ø‚ï¿½ï¿½Ü‚ï¿½ï¿½B
  it('renders the correct message', () => {
    const Constructor = Vue.extend(MyComponent)
    const vm = new Constructor().$mount()
    expect(vm.$el.textContent).toBe('bye!')
  })
})

nodeunit
test/test-divided.js 
var divided = require('../lib/divided');

exports['calculate'] = function(test) {
    test.equal(divided.calculate(4), 2);
    test.done();
};

nodeunit 
~nodeprj$ nodeunit test

module.js:340
    throw err;
          ^
Error: Cannot find module '../lib/divided'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    ...
    at Module.require (module.js:364:17)
    
    
lib/divided.js 
/** ï¿½^ï¿½ï¿½ï¿½ï¿½ê‚½ï¿½lï¿½ï¿½2 ï¿½ÅŠï¿½ï¿½ï¿½ï¿½Äï¿½ï¿½ï¿½ï¿½_ï¿½È‰ï¿½ï¿½ï¿½Ø‚ï¿½Ì‚Ä‚ï¿½ï¿½ï¿½ï¿½Ê‚ï¿½Ô‚ï¿½ï¿½Öï¿½ */
exports.calculate = function(num) {
	return num / 2;
};

virefire unittest

import Vuefire from '../src'

import { db, tick, Vue } from '@posva/vuefire-test-helpers'



Vue.use(Vuefire)



let collection, document, vm

beforeEach(async () => {

  collection = db.collection()

  document = collection.doc()

  vm = new Vue({

    // purposely set items as null

    // but it's a good practice to set it to an empty array

    data: () => ({

      items: null,

      item: null

    }),

    firestore: {

      items: collection,

      item: document

    }

  })

  await tick()

})



test('does nothing with no firestore', () => {

  const vm = new Vue({

    data: () => ({ items: null })

  })

  expect(vm.items).toEqual(null)

})



test('setups _firestoreUnbinds', () => {

  expect(vm._firestoreUnbinds).toBeTruthy()

  expect(Object.keys(vm._firestoreUnbinds).sort()).toEqual(['item', 'items'])

})



test('setups _firestoreUnbinds with no firestore options', () => {

  const vm = new Vue({

    data: () => ({ items: null })

  })

  expect(vm._firestoreUnbinds).toBeTruthy()

  expect(Object.keys(vm._firestoreUnbinds)).toEqual([])

})



test('setups $firestoreRefs', () => {

  expect(Object.keys(vm.$firestoreRefs).sort()).toEqual(['item', 'items'])

  expect(vm.$firestoreRefs.item).toBe(document)

  expect(vm.$firestoreRefs.items).toBe(collection)

})



test('clears $firestoreRefs on $destroy', () => {

  vm.$destroy()

  expect(vm.$firestoreRefs).toEqual(null)

})



